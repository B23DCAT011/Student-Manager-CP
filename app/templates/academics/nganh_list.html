{% extends "base.html" %}

{% block title %}Danh sách Ngành{% endblock %}

{% block content %}
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
  <h2>🎯 Danh sách Ngành</h2>
  <div>
    <a href="/academics" class="btn btn-secondary" style="margin-right: 10px;">↩️ Quay lại</a>
    <a href="/academics/nganh/add" class="btn btn-success">➕ Thêm Ngành</a>
  </div>
</div>

<!-- Thống kê nhanh -->
<div
  style="background: linear-gradient(135deg, #28a745, #1e7e34); color: white; padding: 20px; border-radius: 10px; margin-bottom: 30px; text-align: center;">
  <h4 style="margin: 0;">📊 Tổng số ngành: {{ nganhs|length }}</h4>
</div>

<!-- Bộ lọc -->
<div
  style="background: white; padding: 20px; border-radius: 10px; margin-bottom: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.05);">
  <form method="GET" style="display: flex; gap: 15px; align-items: end;">
    <div style="flex: 1;">
      <label style="display: block; margin-bottom: 5px; font-weight: 500;">🔍 Lọc theo khoa:</label>
      <select name="khoa" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 5px;">
        <option value="">-- Tất cả khoa --</option>
        {% for khoa in khoas %}
        <option value="{{ khoa.ma_khoa }}" {% if request.args.get('khoa')==khoa.ma_khoa %}selected{% endif %}>
          {{ khoa.ten_khoa }}
        </option>
        {% endfor %}
      </select>
    </div>
    <button type="submit" class="btn btn-primary">🔍 Lọc</button>
    <a href="/academics/nganh" class="btn btn-secondary">🔄 Reset</a>
  </form>
</div>

<!-- Danh sách ngành -->
<div style="background: white; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); overflow: hidden;">
  {% if nganhs %}
  <table style="width: 100%; border-collapse: collapse;">
    <thead style="background: #f8f9fa;">
      <tr>
        <th style="padding: 15px; text-align: left; border-bottom: 2px solid #dee2e6; font-weight: 600;">Mã Ngành</th>
        <th style="padding: 15px; text-align: left; border-bottom: 2px solid #dee2e6; font-weight: 600;">Tên Ngành</th>
        <th style="padding: 15px; text-align: left; border-bottom: 2px solid #dee2e6; font-weight: 600;">Khoa</th>
        <th style="padding: 15px; text-align: left; border-bottom: 2px solid #dee2e6; font-weight: 600;">Mô tả</th>
        <th
          style="padding: 15px; text-align: center; border-bottom: 2px solid #dee2e6; font-weight: 600; width: 150px;">
          Thao tác</th>
      </tr>
    </thead>
    <tbody>
      {% for nganh in nganhs %}
      <tr style="border-bottom: 1px solid #eee;">
        <td style="padding: 15px; font-weight: 500; color: #28a745;">{{ nganh.ma_nganh }}</td>
        <td style="padding: 15px; font-weight: 500;">{{ nganh.ten_nganh }}</td>
        <td style="padding: 15px;">
          <span style="background: #007bff; color: white; padding: 4px 8px; border-radius: 4px; font-size: 12px;">
            {{ nganh.khoa.ten_khoa }}
          </span>
        </td>
        <td style="padding: 15px; color: #6c757d;">
          {% if nganh.mo_ta %}
          {{ nganh.mo_ta[:80] }}{% if nganh.mo_ta|length > 80 %}...{% endif %}
          {% else %}
          <em style="color: #adb5bd;">Chưa có mô tả</em>
          {% endif %}
        </td>
        <td style="padding: 15px; text-align: center;">
          <a href="/academics/nganh/{{ nganh.ma_nganh }}/edit" class="btn btn-sm btn-primary"
            style="margin-right: 5px;">✏️ Sửa</a>
          <a href="/academics/nganh/{{ nganh.ma_nganh }}/delete" class="btn btn-sm btn-danger"
            onclick="return confirm('Bạn có chắc muốn xóa ngành này?')">🗑️ Xóa</a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
  <div style="text-align: center; padding: 60px 20px; color: #6c757d;">
    <h4>📭 Chưa có ngành nào</h4>
    <p>Hãy thêm ngành đầu tiên để bắt đầu quản lý!</p>
    <a href="/academics/nganh/add" class="btn btn-success">➕ Thêm Ngành đầu tiên</a>
  </div>
  {% endif %}
</div>

<!-- Thông tin bổ sung -->
<div style="margin-top: 30px; padding: 20px; background: #f8f9fa; border-radius: 10px; border-left: 4px solid #28a745;">
  <h5 style="color: #28a745; margin-bottom: 10px;">💡 Ghi chú</h5>
  <ul style="color: #6c757d; margin: 0; padding-left: 20px;">
    <li>Mỗi ngành thuộc về một khoa cụ thể</li>
    <li>Ngành là cơ sở để tạo các lớp học</li>
    <li>Mã ngành không thể thay đổi sau khi tạo</li>
  </ul>
</div>
{% endblock %}