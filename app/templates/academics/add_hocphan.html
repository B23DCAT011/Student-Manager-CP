{% extends "base.html" %}

{% block title %}Th√™m H·ªçc ph·∫ßn{% endblock %}

{% block content %}
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
  <h2>‚ûï Th√™m H·ªçc ph·∫ßn m·ªõi</h2>
  <a href="/academics/hocphan/list" class="btn btn-secondary">‚Ü©Ô∏è Quay l·∫°i danh s√°ch</a>
</div>

<!-- Form th√™m h·ªçc ph·∫ßn -->
<div
  style="background: white; padding: 30px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); max-width: 800px;">
  <form method="POST" style="display: grid; gap: 20px;">
    <!-- M√£ h·ªçc ph·∫ßn -->
    <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 15px; align-items: center;">
      <label style="font-weight: 500; color: #495057;">
        <span style="color: red;">*</span> M√£ h·ªçc ph·∫ßn:
      </label>
      <input type="text" name="ma_hp" required placeholder="VD: MATH101, PHYS201..."
        style="padding: 10px; border: 1px solid #ddd; border-radius: 5px; font-size: 14px;">
    </div>

    <!-- T√™n h·ªçc ph·∫ßn -->
    <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 15px; align-items: center;">
      <label style="font-weight: 500; color: #495057;">
        <span style="color: red;">*</span> T√™n h·ªçc ph·∫ßn:
      </label>
      <input type="text" name="ten_hp" required placeholder="VD: To√°n cao c·∫•p, V·∫≠t l√Ω ƒë·∫°i c∆∞∆°ng..."
        style="padding: 10px; border: 1px solid #ddd; border-radius: 5px; font-size: 14px;">
    </div>

    <!-- S·ªë ƒêVHT -->
    <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 15px; align-items: center;">
      <label style="font-weight: 500; color: #495057;">S·ªë t√≠n ch·ªâ (ƒêVHT):</label>
      <select name="so_dvht" style="padding: 10px; border: 1px solid #ddd; border-radius: 5px; font-size: 14px;">
        <option value="">-- Ch·ªçn s·ªë t√≠n ch·ªâ --</option>
        <option value="1">1 t√≠n ch·ªâ</option>
        <option value="2">2 t√≠n ch·ªâ</option>
        <option value="3">3 t√≠n ch·ªâ</option>
        <option value="4">4 t√≠n ch·ªâ</option>
        <option value="5">5 t√≠n ch·ªâ</option>
        <option value="6">6 t√≠n ch·ªâ</option>
      </select>
    </div>

    <!-- Ng√†nh -->
    <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 15px; align-items: center;">
      <label style="font-weight: 500; color: #495057;">
        <span style="color: red;">*</span> Ng√†nh:
      </label>
      <select name="ma_nganh" required
        style="padding: 10px; border: 1px solid #ddd; border-radius: 5px; font-size: 14px;">
        <option value="">-- Ch·ªçn ng√†nh --</option>
        <!-- S·∫Ω ƒë∆∞·ª£c load t·ª´ database -->
        {% for nganh in nganhs %}
        <option value="{{ nganh.ma_nganh }}">{{ nganh.ten_nganh }} ({{ nganh.khoa.ten_khoa }})</option>
        {% endfor %}
      </select>
    </div>

    <!-- H·ªçc k·ª≥ -->
    <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 15px; align-items: center;">
      <label style="font-weight: 500; color: #495057;">H·ªçc k·ª≥:</label>
      <select name="hoc_ky" style="padding: 10px; border: 1px solid #ddd; border-radius: 5px; font-size: 14px;">
        <option value="">-- Ch·ªçn h·ªçc k·ª≥ --</option>
        <option value="1">H·ªçc k·ª≥ 1</option>
        <option value="2">H·ªçc k·ª≥ 2</option>
        <option value="3">H·ªçc k·ª≥ 3</option>
        <option value="4">H·ªçc k·ª≥ 4</option>
        <option value="5">H·ªçc k·ª≥ 5</option>
        <option value="6">H·ªçc k·ª≥ 6</option>
        <option value="7">H·ªçc k·ª≥ 7</option>
        <option value="8">H·ªçc k·ª≥ 8</option>
      </select>
    </div>

    <!-- Buttons -->
    <div
      style="display: flex; gap: 10px; justify-content: flex-end; margin-top: 20px; padding-top: 20px; border-top: 1px solid #eee;">
      <a href="/academics/hocphan/list" class="btn btn-secondary">‚ùå H·ªßy</a>
      <button type="submit" class="btn btn-success">‚úÖ Th√™m h·ªçc ph·∫ßn</button>
    </div>
  </form>
</div>

<!-- H∆∞·ªõng d·∫´n -->
<div style="margin-top: 30px; padding: 20px; background: #f8f9fa; border-radius: 10px; border-left: 4px solid #007bff;">
  <h5 style="color: #007bff; margin-bottom: 10px;">üí° H∆∞·ªõng d·∫´n</h5>
  <ul style="color: #6c757d; margin: 0; padding-left: 20px;">
    <li><strong>M√£ h·ªçc ph·∫ßn:</strong> S·ª≠ d·ª•ng m√£ ng·∫Øn g·ªçn, duy nh·∫•t (VD: MATH101, ENG201)</li>
    <li><strong>T√™n h·ªçc ph·∫ßn:</strong> T√™n ƒë·∫ßy ƒë·ªß c·ªßa m√¥n h·ªçc</li>
    <li><strong>T√≠n ch·ªâ:</strong> S·ªë ƒë∆°n v·ªã h·ªçc tr√¨nh (th∆∞·ªùng t·ª´ 1-6 t√≠n ch·ªâ)</li>
    <li><strong>Ng√†nh:</strong> H·ªçc ph·∫ßn thu·ªôc ng√†nh n√†o</li>
    <li><strong>H·ªçc k·ª≥:</strong> H·ªçc k·ª≥ khuy·∫øn ngh·ªã h·ªçc m√¥n n√†y</li>
  </ul>
</div>

<script>
  // Validation client-side
  document.querySelector('form').addEventListener('submit', function (e) {
    const maHp = document.querySelector('input[name="ma_hp"]').value.trim();
    const tenHp = document.querySelector('input[name="ten_hp"]').value.trim();
    const maNganh = document.querySelector('select[name="ma_nganh"]').value;

    if (!maHp || !tenHp || !maNganh) {
      e.preventDefault();
      alert('Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin b·∫Øt bu·ªôc (*)');
      return;
    }

    // Validate m√£ h·ªçc ph·∫ßn format
    if (!/^[A-Z0-9]{3,10}$/.test(maHp)) {
      e.preventDefault();
      alert('M√£ h·ªçc ph·∫ßn ph·∫£i l√† 3-10 k√Ω t·ª± ch·ªØ hoa v√† s·ªë (VD: MATH101)');
      return;
    }
  });
</script>
{% endblock %}