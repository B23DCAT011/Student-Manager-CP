{% extends "base.html" %}

{% block title %}Danh sÃ¡ch Há»c pháº§n{% endblock %}

{% block content %}
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
  <h2>ğŸ“– Danh sÃ¡ch Há»c pháº§n</h2>
  <div>
    <a href="/academics" class="btn btn-secondary" style="margin-right: 10px;">â†©ï¸ Quay láº¡i</a>
    <a href="/academics/hocphan/add" class="btn btn-success">â• ThÃªm Há»c pháº§n</a>
  </div>
</div>

<!-- Thá»‘ng kÃª nhanh -->
<div
  style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 30px;">
  <div
    style="background: linear-gradient(135deg, #dc3545, #bd2130); color: white; padding: 20px; border-radius: 10px; text-align: center;">
    <h4 style="margin: 0;">ğŸ“Š Tá»•ng mÃ´n há»c</h4>
    <p style="margin: 5px 0; font-size: 24px; font-weight: bold;">{{ hocphans|length }}</p>
  </div>
  <div
    style="background: linear-gradient(135deg, #ffc107, #d39e00); color: white; padding: 20px; border-radius: 10px; text-align: center;">
    <h4 style="margin: 0;">â±ï¸ Tá»•ng tÃ­n chá»‰</h4>
    <p style="margin: 5px 0; font-size: 24px; font-weight: bold;">{{ total_credits }}</p>
  </div>
</div>

<!-- Bá»™ lá»c -->
<div
  style="background: white; padding: 20px; border-radius: 10px; margin-bottom: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.05);">
  <form method="GET" style="display: grid; grid-template-columns: 1fr 1fr auto auto; gap: 15px; align-items: end;">
    <div>
      <label style="display: block; margin-bottom: 5px; font-weight: 500;">ğŸ” TÃ¬m theo tÃªn:</label>
      <input type="text" name="search" value="{{ request.args.get('search', '') }}" placeholder="Nháº­p tÃªn há»c pháº§n..."
        style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 5px;">
    </div>
    <div>
      <label style="display: block; margin-bottom: 5px; font-weight: 500;">â±ï¸ Sá»‘ tÃ­n chá»‰:</label>
      <select name="dvht" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 5px;">
        <option value="">-- Táº¥t cáº£ --</option>
        <option value="1" {% if request.args.get('dvht')=='1' %}selected{% endif %}>1 tÃ­n chá»‰</option>
        <option value="2" {% if request.args.get('dvht')=='2' %}selected{% endif %}>2 tÃ­n chá»‰</option>
        <option value="3" {% if request.args.get('dvht')=='3' %}selected{% endif %}>3 tÃ­n chá»‰</option>
        <option value="4" {% if request.args.get('dvht')=='4' %}selected{% endif %}>4 tÃ­n chá»‰</option>
        <option value="5" {% if request.args.get('dvht')=='5' %}selected{% endif %}>5 tÃ­n chá»‰</option>
      </select>
    </div>
    <button type="submit" class="btn btn-primary">ğŸ” Lá»c</button>
    <a href="/academics/hocphan/list" class="btn btn-secondary">ğŸ”„ Reset</a>
  </form>
</div>

<!-- Danh sÃ¡ch há»c pháº§n -->
<div style="background: white; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); overflow: hidden;">
  {% if hocphans %}
  <table style="width: 100%; border-collapse: collapse;">
    <thead style="background: #f8f9fa;">
      <tr>
        <th style="padding: 15px; text-align: left; border-bottom: 2px solid #dee2e6; font-weight: 600;">MÃ£ HP</th>
        <th style="padding: 15px; text-align: left; border-bottom: 2px solid #dee2e6; font-weight: 600;">TÃªn Há»c pháº§n
        </th>
        <th style="padding: 15px; text-align: center; border-bottom: 2px solid #dee2e6; font-weight: 600;">TÃ­n chá»‰</th>
        <th style="padding: 15px; text-align: left; border-bottom: 2px solid #dee2e6; font-weight: 600;">NgÃ nh</th>
        <th style="padding: 15px; text-align: center; border-bottom: 2px solid #dee2e6; font-weight: 600;">Há»c ká»³</th>
        <th
          style="padding: 15px; text-align: center; border-bottom: 2px solid #dee2e6; font-weight: 600; width: 150px;">
          Thao tÃ¡c</th>
      </tr>
    </thead>
    <tbody>
      {% for hocphan in hocphans %}
      <tr style="border-bottom: 1px solid #eee;">
        <td style="padding: 15px; font-weight: 500; color: #dc3545;">{{ hocphan.ma_hp }}</td>
        <td style="padding: 15px; font-weight: 500;">{{ hocphan.ten_hp }}</td>
        <td style="padding: 15px; text-align: center;">
          <span
            style="background: #ffc107; color: #333; padding: 4px 8px; border-radius: 50%; font-weight: bold; font-size: 12px;">
            {{ hocphan.so_dvht or 'N/A' }}
          </span>
        </td>
        <td style="padding: 15px;">
          {% if hocphan.nganh %}
          <span style="background: #28a745; color: white; padding: 4px 8px; border-radius: 4px; font-size: 12px;">
            {{ hocphan.nganh.ten_nganh }}
          </span>
          {% else %}
          <em style="color: #adb5bd;">ChÆ°a xÃ¡c Ä‘á»‹nh</em>
          {% endif %}
        </td>
        <td style="padding: 15px; text-align: center;">
          {% if hocphan.hoc_ky %}
          <span
            style="background: #007bff; color: white; padding: 4px 8px; border-radius: 50%; font-weight: bold; font-size: 12px;">
            {{ hocphan.hoc_ky }}
          </span>
          {% else %}
          <em style="color: #adb5bd;">N/A</em>
          {% endif %}
        </td>
        <td style="padding: 15px; text-align: center;">
          <a href="/academics/hocphan/{{ hocphan.ma_hp }}/edit" class="btn btn-sm btn-primary"
            style="margin-right: 5px;">âœï¸ Sá»­a</a>
          <a href="/academics/hocphan/{{ hocphan.ma_hp }}/delete" class="btn btn-sm btn-danger"
            onclick="return confirm('Báº¡n cÃ³ cháº¯c muá»‘n xÃ³a há»c pháº§n nÃ y?')">ğŸ—‘ï¸ XÃ³a</a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
  <div style="text-align: center; padding: 60px 20px; color: #6c757d;">
    <h4>ğŸ“­ ChÆ°a cÃ³ há»c pháº§n nÃ o</h4>
    <p>HÃ£y thÃªm há»c pháº§n Ä‘áº§u tiÃªn Ä‘á»ƒ báº¯t Ä‘áº§u quáº£n lÃ½!</p>
    <a href="/academics/hocphan/add" class="btn btn-success">â• ThÃªm Há»c pháº§n Ä‘áº§u tiÃªn</a>
  </div>
  {% endif %}
</div>

<!-- ThÃ´ng tin bá»• sung -->
<div style="margin-top: 30px; padding: 20px; background: #f8f9fa; border-radius: 10px; border-left: 4px solid #dc3545;">
  <h5 style="color: #dc3545; margin-bottom: 10px;">ğŸ’¡ Ghi chÃº</h5>
  <ul style="color: #6c757d; margin: 0; padding-left: 20px;">
    <li>Há»c pháº§n lÃ  Ä‘Æ¡n vá»‹ cÆ¡ báº£n cá»§a chÆ°Æ¡ng trÃ¬nh Ä‘Ã o táº¡o</li>
    <li>ÄVHT = ÄÆ¡n vá»‹ há»c trÃ¬nh (hiá»‡n táº¡i gá»i lÃ  tÃ­n chá»‰)</li>
    <li>Má»—i há»c pháº§n thuá»™c vá» má»™t ngÃ nh cá»¥ thá»ƒ</li>
    <li>MÃ£ há»c pháº§n khÃ´ng thá»ƒ thay Ä‘á»•i sau khi táº¡o</li>
  </ul>
</div>
{% endblock %}